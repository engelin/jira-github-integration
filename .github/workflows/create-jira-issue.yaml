on: 
  issues:
    types:
      - opened
      - reopened

jobs:
  create-jira-issue:
    runs-on: ubuntu-latest
    steps:
    - name: Login to Jira
      uses: atlassian/gajira-login@master
      env:
        JIRA_BASE_URL: ${{ secrets.JIRA_BASE_URL }}
        JIRA_USER_EMAIL: ${{ secrets.JIRA_USER_EMAIL }}
        JIRA_API_TOKEN: ${{ secrets.JIRA_API_TOKEN }}
    
    - name: Set Issue Bug type
      if: (contains(github.event.issue.labels.*.name, 'from jira') == false && contains(github.event.issue.labels.*.name, 'bug') == true)
      run: echo "ISSUE_TYPE=Bug" >> $GITHUB_ENV
      
    - name: Set Issue Task type
      if: (contains(github.event.issue.labels.*.name, 'from jira') == false && contains(github.event.issue.labels.*.name, 'bug') == false)
      run: echo "ISSUE_TYPE=Task" >> $GITHUB_ENV

#     - name: Create issue
#       id: create
#       uses: atlassian/gajira-create@master
#       with:
#         project: A3MS
#         issuetype: ${{ env.ISSUE_TYPE }}
#         summary: ${{ github.event.issue.title }}
#         description: ${{ github.event.issue.body }}
        
#     - name: Log created issue
#       run: echo "Issue ${{ steps.create.outputs.issue }} was created"
    
#     - name: Create comment
#       uses: peter-evans/create-or-update-comment@v2
#       with:
#         issue-number: ${{ github.event.issue.number }}
#         body: |
#           Created a Jira issue with ${{ steps.create.outputs.issue }}
